<!DOCTYPE html>
<html>
<head>
  <title>Proxy Aktif</title>
  <style>
    body {
      font-family: Arial, sans-serif;
    }
    #proxy-list {
      margin-top: 20px;
    }
    .proxy {
      margin-bottom: 10px;
      border: 1px solid #ddd;
      padding: 10px;
    }
    .pagination {
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h1>Proxy Aktif:</h1>
  <input type="text" id="search" placeholder="Cari proxy...">
  <button id="cari">Cari</button>
  <div id="proxy-list"></div>
  <div class="pagination">
    <button id="prev">Sebelumnya</button>
    <span id="halaman">Halaman 1 dari 1</span>
    <button id="next">Selanjutnya</button>
  </div>

  <script>
let proxies = [];
let halamanSaatIni = 1;
let jumlahHalaman = 1;
let jumlahProxyPerHalaman = 10;

function muatProxy() {
  fetch("proxy_list.txt")
    .then(response => response.text())
    .then(data => {
      proxies = data.split("\n").map(proxy => {
        const [ip, port, negara, penyedia] = proxy.split(",");
        return { ip, port, negara, penyedia };
      });
      tampilkanProxy();
    })
    .catch(error => console.error("Error:", error));
}

function tampilkanProxy() {
  const proxyList = document.getElementById('proxy-list');
  proxyList.innerHTML = '';
  const awal = (halamanSaatIni - 1) * jumlahProxyPerHalaman;
  const akhir = awal + jumlahProxyPerHalaman;
  const proxyYangDitampilkan = proxies.slice(awal, akhir);
  proxyYangDitampilkan.forEach(proxy => {
    const proxyElement = document.createElement('div');
    proxyElement.className = 'proxy';
    proxyElement.innerHTML = `
      <table>
        <thead>
          <tr>
            <th>IP : PORT</th>
            <th> COUNTRY | ISP</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>${proxy.ip}:${proxy.port} </td>
            <td>(${proxy.negara}) | ${proxy.penyedia}</td>
          </tr>
        </tbody>
      </table>
    `;
    proxyList.appendChild(proxyElement);
  });
  updatePagination();
}

function updatePagination() {
  jumlahHalaman = Math.ceil(proxies.length / jumlahProxyPerHalaman);
  document.getElementById('halaman').innerText = `Halaman ${halamanSaatIni} dari ${jumlahHalaman}`;
}

function cariProxy() {
  const search = document.getElementById('search').value.trim().toLowerCase();
  if (search !== '') {
    const proxyList = document.getElementById('proxy-list');
    proxyList.innerHTML = '';
    proxies.forEach(proxy => {
      if (
        proxy.ip.toLowerCase().includes(search) ||
        proxy.port.toString().includes(search) ||
        proxy.negara.toLowerCase().includes(search) ||
        proxy.penyedia.toLowerCase().includes(search)
      ) {
        const proxyElement = document.createElement('div');
        proxyElement.className = 'proxy';
        proxyElement.innerHTML = `
          <table>
            <thead>
              <tr>
                <th>IP : PORT</th>
                <th> COUNTRY | ISP</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>${proxy.ip}:${proxy.port} </td>
                <td>(${proxy.negara}) | ${proxy.penyedia}</td>
              </tr>
            </tbody>
          </table>
        `;
        proxyList.appendChild(proxyElement);
      }
    });
  } else {
    alert('Masukkan kata kunci pencarian');
  }
}

document.getElementById('cari').addEventListener('click', cariProxy);
document.getElementById('prev').addEventListener('click', () => {
  if (halamanSaatIni > 1) {
    halamanSaatIni--;
    tampilkanProxy();
  }
});
document.getElementById('next').addEventListener('click', () => {
  if (halamanSaatIni < jumlahHalaman) {
    halamanSaatIni++;
    tampilkanProxy();
  }
});

muatProxy();
</scrpit>
</body></html>
