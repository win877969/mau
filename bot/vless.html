<table>
  <thead>
    <tr>
      <th>TYPE</th>
      <th>COUNTRY CODE</th>
      <th>WILDCARD</th>
      <th>CONS</th>
      <th>LINK SUB</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <select class="service-selector" id="service-type">
          <option value="vless">VLESS</option>
          <option value="trojan">TROJAN</option>
          <option value="ss">SS</option>
        </select>
      </td>
      <td>
        <div id="country-selector-container"></div>
      </td>
      <td>
        <select class="service-selector" id="wildcard">
          <option value="">NO WILDCARD</option>
          <option value="ava.game.naver.com">ava.game.naver.com</option>
          <option value="graph.instagram.com">graph.instagram.com</option>
          <option value="quiz.int.vidio.com">quiz.int.vidio.com</option>
          <option value="live.iflix.com">live.iflix.com</option>
          <option value="support.zoom.us">support.zoom.us</option>
          <option value="blog.webex.com">blog.webex.com</option>
          <option value="investors.spotify.com">investors.spotify.com</option>
          <option value="cache.netflix.com">cache.netflix.com</option>
          <option value="zaintest.vuclip.com">zaintest.vuclip.com</option>
          <option value="io.ruangguru.com">io.ruangguru.com</option>
          <option value="api.midtrans.com">api.midtrans.com</option>
        </select>
      </td>
      <td>
        <select class="service-selector" id="cons">
          <option value="5">5</option>
          <option value="10">10</option>
          <option value="25">25</option>
          <option value="50">50</option>
          <option value="100">100</option>
          <option value="250">250</option>
        </select>
      </td>
      <td>
        <input type="text" id="link-sub" value="" readonly />
        <button onclick="copyLink()">Copy</button>
      </td>
    </tr>
  </tbody>
</table>

<script>
  // Memuat konten file country-selector.html ke dalam elemen container
  function loadCountrySelector() {
    return fetch('myfile/data_con.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('country-selector-container').innerHTML = data;

        // Pastikan elemen country-code sudah ada sebelum menambahkan listener
        const countryCodeSelector = document.getElementById('country-code');
        if (countryCodeSelector) {
          countryCodeSelector.addEventListener('change', generateLink);
        } else {
          console.error('Country selector not loaded correctly.');
        }
      })
      .catch(error => {
        console.error('Error loading the country selector:', error);
      });
  }

  // Function to generate the link
  function generateLink() {
    const serviceType = document.getElementById('service-type').value;
    const countryCodeElement = document.getElementById('country-code');
    const countryCode = countryCodeElement ? countryCodeElement.value : '';
    const wildcard = document.getElementById('wildcard').value;
    const cons = document.getElementById('cons').value;

    // Base URL for the link
    let baseURL = `https://sub.bmkg.xyz/${serviceType}?sub=${countryCode}&count=${cons}`;

    // If wildcard is selected, append it to the URL
    if (wildcard) {
      baseURL += `&wildcard=${wildcard}`;
    }

    // Set the generated URL to the input field
    document.getElementById('link-sub').value = baseURL;
  }

  // Function to copy the link to clipboard
  function copyLink() {
  const inputField = document.getElementById('link-sub');
  inputField.select();
  document.execCommand('copy');

  // Tampilkan popup pesan
  const popup = document.createElement('div');
  popup.innerText = "ðŸš€ Link copied successfully! Ready to share! ðŸŽ‰";
  popup.style.position = "fixed";
  popup.style.bottom = "20px";
  popup.style.right = "20px";
  popup.style.padding = "10px 20px";
  popup.style.backgroundColor = "#4CAF50";
  popup.style.color = "#fff";
  popup.style.fontSize = "16px";
  popup.style.borderRadius = "5px";
  popup.style.boxShadow = "0 4px 6px rgba(0, 0, 0, 0.1)";
  popup.style.zIndex = "1000";
  popup.style.transition = "opacity 0.5s ease-in-out";
  popup.style.opacity = "1";

  document.body.appendChild(popup);

  // Hilangkan popup setelah 3 detik
  setTimeout(() => {
    popup.style.opacity = "0";
    setTimeout(() => popup.remove(), 500);
  }, 3000);
}


  // Panggil fungsi loadCountrySelector dan tambahkan listener ke elemen lain
  loadCountrySelector().then(() => {
    document.getElementById('service-type').addEventListener('change', generateLink);
    document.getElementById('wildcard').addEventListener('change', generateLink);
    document.getElementById('cons').addEventListener('change', generateLink);

    // Panggil generateLink pertama kali
    generateLink();
  });
</script>
